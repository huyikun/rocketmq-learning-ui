---
id: "question-history-16280"
title: "消息在服务器上可以保存多长时间？"
date: "2024-07-25"
category: "expertConsultation"
description: "根据我所了解的知识，RocketMQ 中的消息在服务器上默认可以保存的最大时长是3天。超过这个时间未被消费的消息将会被系统自动删除。这个默认的保存时长可以通过配置项`fileReservedTime`来调整，该配置项是以小时为单位的，例如设置为72小时，即可让消息保存长达3天。### 具体步骤与解释"
---

## 用户问题 ： 
 消息在服务器上可以保存多长时间？  

---------------
## 专家官方解答 ：

根据我所了解的知识，RocketMQ 中的消息在服务器上默认可以保存的最大时长是3天。超过这个时间未被消费的消息将会被系统自动删除。这个默认的保存时长可以通过配置项`fileReservedTime`来调整，该配置项是以小时为单位的，例如设置为72小时，即可让消息保存长达3天。

### 具体步骤与解释：
1. **确认当前配置**：首先，你需要检查你的RocketMQ集群当前关于消息保存时长的配置，特别是`fileReservedTime`这个参数。这可以通过查看Broker端的配置文件（如`broker.conf`）来实现。

2. **调整配置（如有需要）**：如果你发现当前的消息保存时长不满足需求，可以通过修改`fileReservedTime`的值来延长或缩短消息的保存时间。例如，若要将消息保存时长调整为72小时（即3天），则需在配置文件中设置`fileReservedTime=72`。完成配置更改后，需要重启Broker服务使改动生效。

3. **监控与验证**：配置更改后，建议通过RocketMQ提供的监控工具或API来跟踪消息的存储情况，确保消息按照新的保留策略正确处理。同时，可以发送测试消息并等待超过原默认时长的时间，验证消息是否依然可被查询和消费，以此来确认配置调整的效果。

请注意，虽然提供了调整配置的方法，但延长消息保存时长可能会增加存储成本和维护复杂度，请根据实际业务需求谨慎调整。


<font color="#949494">---------------</font> 


## 参考链接 ：

* 专家经验：消息在服务器上可以保存多长时间？ 
 
 * 专家经验：当消费失败的时候如何找到失败的消息？ 
 
 * 专家经验：新创建的 ConsumerGroup 从哪里开始消费消息？ 


 <font color="#949494">---------------</font> 
 


## <font color="#FF0000">答疑服务说明：</font> 

本内容经由技术专家审阅的用户问答的镜像生成，我们提供了<font color="#FF0000">专家智能答疑服务</font>，在<font color="#FF0000">页面的右下的浮窗”专家答疑“</font>。您也可以访问 : [全局专家答疑](https://answer.opensource.alibaba.com/docs/intro) 。 咨询其他产品的的问题

### 反馈
如问答有错漏，欢迎点：[差评](https://ai.nacos.io/user/feedbackByEnhancerGradePOJOID?enhancerGradePOJOId=16282)给我们反馈。
