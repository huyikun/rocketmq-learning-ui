---
id: "question-history-16333"
title: "消息只会被传递一次吗？"
date: "2024-07-25"
category: "expertConsultation"
description: "RocketMQ并不能保证消息只会被传递一次，而是确保所有消息至少被传递一次。在绝大多数场景下，消息不会出现重复，但MetaQ（RocketMQ的前身，这里假设问题是关于RocketMQ且信息适用）的设计并不保证消息绝对不重复。重复产生的根源主要在于分布式环境下的超时问题以及订阅消息阶段的复杂性，比"
---

## 用户问题 ： 
 消息只会被传递一次吗？  

---------------
## 专家官方解答 ：

RocketMQ并不能保证消息只会被传递一次，而是确保所有消息至少被传递一次。在绝大多数场景下，消息不会出现重复，但MetaQ（RocketMQ的前身，这里假设问题是关于RocketMQ且信息适用）的设计并不保证消息绝对不重复。重复产生的根源主要在于分布式环境下的超时问题以及订阅消息阶段的复杂性，比如客户端的状态变化、网络不稳定、集群调整等情况均可能导致消息被重复发送或接收。

针对消息重复的问题，应用方需要实现幂等性处理以确保消息处理结果的一致性，即使消息被多次送达也能得到相同的结果。实现幂等性的常见方法有：

- **根据业务Key去重**：在消息中携带一个业务唯一标识，如订单ID，消费者在处理前检查该标识是否已被处理过，以此决定是否执行业务逻辑。
- **注意**：直接根据MsgId去重并不推荐，因为它无法解决生产端重复发送的问题。

如果遇到大量消息重复的情况，首先应检查消费端是否存在频繁的消费失败导致消息被系统自动重投。若非此原因，建议联系服务提供商进一步排查。

简而言之，RocketMQ不能保证消息的“Exactly Once”传递，因此应用层面需要实现相应的幂等处理逻辑来应对可能的消息重复。


<font color="#949494">---------------</font> 


## 参考链接 ：

* 专家经验：消息只会被传递一次吗？ 
 
 * 专家经验：当消费失败的时候如何重新消费消息？ 


 <font color="#949494">---------------</font> 
 


## <font color="#FF0000">答疑服务说明：</font> 

本内容经由技术专家审阅的用户问答的镜像生成，我们提供了<font color="#FF0000">专家智能答疑服务</font>，在<font color="#FF0000">页面的右下的浮窗”专家答疑“</font>。您也可以访问 : [全局专家答疑](https://answer.opensource.alibaba.com/docs/intro) 。 咨询其他产品的的问题

### 反馈
如问答有错漏，欢迎点：[差评](https://ai.nacos.io/user/feedbackByEnhancerGradePOJOID?enhancerGradePOJOId=16359)给我们反馈。
